(this["webpackJsonpcfr-frontend"]=this["webpackJsonpcfr-frontend"]||[]).push([[0],{55:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(0),a=c.n(r),s=c(24),o=c.n(s),i=(c(55),c(5)),l=c.n(i),u=c(9),d=c(3),j=Object(r.createContext)(),p=c(4),b=c(7),h=c(8),O=c(11),g=c(21),v=c(47),f=c.n(v),x=c(88),m=c(46),y=c.n(m),w=c(87),S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"http://localhost:8080",k="user/authentication/token",L="user/authentication/SET_TOKEN",C="user/authentication/REMOVE_TOKEN",A="user/authentication/SET_AVATAR",N="user/authentication/REMOVE_AVATAR",R="user/authentication/SET_USER_NAME",U="user/authentication/REMOVE_USER_NAME",I="user/authentication/SET_USER_EMAIL",E="user/authentication/REMOVE_USER_EMAIL",D="user/authentication/SET_USER_ID",P="user/authentication/REMOVE_USER_ID",T=function(e){return{type:C}},_=function(e){return{type:L,token:e}},F=function(e){return{type:A,avatarURL:e}},B=function(e){return{type:R,name:e}},z=function(e){return{type:D,id:e}};var M=function(e){var t=Object(h.b)(),c="",a=Object(h.c)((function(e){return e.authentication.avatarURL})),s=Object(h.c)((function(e){return e.authentication.token})),o=Object(h.c)((function(e){return e.authentication.userId})),i=Object(h.c)((function(e){return e.authentication.name})),j=Object(r.useState)(null),p=Object(d.a)(j,2),b=p[0],O=p[1];Object(r.useEffect)((function(){o?g():O(null),console.log("Getting badge count.")}),[o]);var g=function(){var e=Object(u.a)(l.a.mark((function e(){var t,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=24;break}return console.log("UserId:  ",o),e.next=4,fetch("".concat(S,"/carts/cartItems/").concat(o),{method:"get",headers:{"Content-Type":"application/json"}});case 4:if(!(t=e.sent).ok){e.next=21;break}return e.next=8,t.json();case 8:if(c=e.sent,n=c.cartItems,console.log("Got cartItems:  ",n.cartItems),!(n>0)){e.next=17;break}return console.log("Badge count:  ",n),O(n),e.abrupt("return",n);case 17:return O(null),e.abrupt("return",null);case 19:e.next=22;break;case 21:console.log("Failed to get badgeCount.");case 22:e.next=25;break;case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(w.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(n.jsxs)("div",{className:"topBar",children:[Object(n.jsx)("label",{className:"logoFont",style:{color:"white"},children:"CF Riders"}),Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log("Submit handled:  ",c)},children:Object(n.jsx)("input",{className:"navSearchBar",type:"text",name:"search",onChange:function(e){c=e.target.value,console.log("Search string:  ",c)},placeholder:"Start shopping..."})}),Object(n.jsx)(y.a,{className:"homeIcon",onClick:function(e){e.preventDefault(),console.log("Clicked home button..."),window.location.href="/"},style:{margin:"10px",color:"white"}}),Object(n.jsx)(x.a,{badgeContent:b,color:"secondary",children:Object(n.jsx)(f.a,{style:{color:"white"}})}),Object(n.jsx)("button",{className:"signInButton",onClick:function(e){s?(t(T()),t({type:N}),t({type:U}),t({type:E}),t({type:P}),window.localStorage.removeItem(k)):(e.preventDefault(),console.log("Need to redirect to signin page..."),window.location.href="/users/logInOrSignUp")},children:s?"SignOut":"SignIn"}),Object(n.jsxs)("div",{className:"avatar-container",children:[a?Object(n.jsx)("img",{src:a,className:"main-profile-img avatar",alt:"avatar"}):Object(n.jsx)("img",{src:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png",className:"main-profile-img avatar",alt:"avatar"}),Object(n.jsx)("i",{className:"fa"}),i]})]})})},V=function(e){var t=Object(r.useState)(""),c=Object(d.a)(t,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),j=i[0],p=i[1],b=Object(r.useState)(""),g=Object(d.a)(b,2),v=g[0],f=g[1],x=Object(r.useState)(""),m=Object(d.a)(x,2),y=m[0],w=m[1],L=Object(r.useState)(""),C=Object(d.a)(L,2),A=C[0],N=C[1],R=Object(r.useState)(""),U=Object(d.a)(R,2),I=U[0],E=U[1],D=Object(h.b)(),P=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(S,"/users/"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:A,emailAddress:j,password:v,confirmPassword:y,avatarURL:I})});case 3:if(c=e.sent,console.log("Sent signup request with user: ",j," and password: ",v),!c.ok){e.next=17;break}return e.next=8,c.json();case 8:n=e.sent,r=n.token,a=n.user,window.localStorage.setItem(k,r),D(_(r)),console.log("User name:  ",a.name),D(B(a.name.split(" ")[0])),D(F(""===I?"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png":I)),s(r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?Object(n.jsx)(O.a,{to:"/"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("form",{className:"signUpForm",onSubmit:P,children:[Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Name "})}),Object(n.jsx)("input",{className:"inputBox",type:"text",placeholder:"First and Last Name",value:A,onChange:function(e){N(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Email:"})}),Object(n.jsx)("input",{className:"inputBox",type:"email",placeholder:"Email address",value:j,onChange:function(e){p(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Avatar URL"})}),Object(n.jsx)("input",{className:"inputBox",type:"text",placeholder:"Avatar URL (optional)",value:I,onChange:function(e){E(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Password:"})}),Object(n.jsx)("input",{className:"inputBox",type:"password",placeholder:"Password",value:v,onChange:function(e){f(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Confirm Password:"})}),Object(n.jsx)("input",{className:"inputBox",type:"password",placeholder:"Confirm Password",value:y,onChange:function(e){w(e.target.value)}})]}),Object(n.jsx)("button",{type:"submit",children:"Sign Up"})]})]})},G=function(e){var t=Object(r.useState)(""),c=Object(d.a)(t,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(d.a)(o,2),j=i[0],p=i[1],b=Object(r.useState)(""),g=Object(d.a)(b,2),v=g[0],f=g[1],x=Object(h.b)(),m=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("demouser@demouser.com"),p("password"),t.preventDefault(),e.next=5,fetch("".concat(S,"/users/login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailAddress:"demouser@demouser.com",password:"password"})});case 5:if(c=e.sent,console.log("Sent login request with user:  demouser@demouser.com, and password:  password"),console.log("response is:  ",c),!c.ok){e.next=20;break}return e.next=11,c.json();case 11:n=e.sent,r=n.token,a=n.user,window.localStorage.setItem(k,r),x(_(r)),x(B(a.name.split(" ")[0])),x(F(a.avatarURL)),x(z(a.id)),f(r);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(S,"/users/login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailAddress:a,password:j})});case 3:if(c=e.sent,console.log("Sent login request with user: ",a," and password: ",j),console.log("response is:  ",c),!c.ok){e.next=18;break}return e.next=9,c.json();case 9:n=e.sent,r=n.token,s=n.user,window.localStorage.setItem(k,r),x(_(r)),x(B(s.name.split(" ")[0])),x(F(s.avatarURL)),x(z(s.id)),f(r);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v?Object(n.jsx)(O.a,{to:"/"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("form",{className:"loginForm",children:[Object(n.jsxs)("div",{className:"loginInput",children:[Object(n.jsx)("div",{children:Object(n.jsx)("label",{children:"Email :           "})}),Object(n.jsx)("input",{className:"inputBox",type:"email",placeholder:"Email",value:a,onChange:function(e){s(e.target.value)}})]}),Object(n.jsxs)("div",{className:"loginInput",children:[Object(n.jsx)("div",{children:Object(n.jsx)("label",{children:"Password : "})}),Object(n.jsx)("input",{className:"inputBox",type:"password",placeholder:"Password",value:j,onChange:function(e){p(e.target.value)}})]}),Object(n.jsx)("button",{onClick:y,children:"Login"}),Object(n.jsx)("button",{style:{height:"60px"},onClick:m,children:"Login Demo"})]})]})},H=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsx)("h1",{children:"OrderDetail ... should be a protected route"})]})},J=function(e){e.productId;var t=e.review,c=Object(r.useState)([]),a=Object(d.a)(c,2),s=a[0],o=a[1];return Object(r.useEffect)((function(){for(var e=[],c=0;c<t.rating;c++)e.push(Object(n.jsx)("i",{className:"fas fa-star"}));o(e)}),[t.rating]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:t.avatarURL,alt:"Avatar",style:{height:"60px",width:"60px",borderRadius:"40px",backgroundColor:"none"}}),Object(n.jsxs)("p",{style:{display:"inline-block"},children:[t.name,",    ",t.postDate]}),Object(n.jsx)("p",{children:s})]}),Object(n.jsx)("div",{style:{borderBottom:"2px solid grey"},children:Object(n.jsx)("p",{children:t.review})})]})},K=function(e){return Object(n.jsxs)("div",{style:{border:"2px solid red",display:"inline-block",width:"30%"},children:[Object(n.jsx)("h2",{children:"Rate this product:"}),Object(n.jsx)("h2",{children:"star  star  star  star  star"})]})},W=c(29),q=[{value:"chocolate",label:"Chocolate"},{value:"strawberry",label:"Strawberry"},{value:"vanilla",label:"Vanilla"}],X=function(){return Object(n.jsx)(W.a,{options:q})},$=function(e){var t=e.productId,c=Object(O.g)(),a=Object(r.useState)(t),s=Object(d.a)(a,1)[0],o=Object(r.useState)(""),i=Object(d.a)(o,2),l=i[0],u=i[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{}),Object(n.jsx)("div",{style:{borderTop:"2px solid grey",display:"inline-block",width:"60%"},children:Object(n.jsxs)("div",{style:{display:"block"},children:[Object(n.jsx)("h2",{children:"Add your review: "}),Object(n.jsxs)("form",{children:[Object(n.jsx)("textarea",{style:{width:"80%"},value:l,placeholder:"Tell us what you like about this product ...",id:"review",name:"review",rows:"10",onChange:function(e){u(e.target.value)}}),Object(n.jsx)("button",{style:{marginLeft:"20px"},id:"Submit",onClick:function(e){e.preventDefault(),console.log("Handle updateProductReview ..."),console.log("The next state may be problematic. Not sure about the next line passing state..."),console.log("Entered:  ",l),c.push({pathname:"/productDetail",state:{props:s}})},children:"Submit"})]})]})}),Object(n.jsx)(K,{})]})},Y=c(6),Q=function(e){var t=e.productDetail,c=Object(r.useState)([]),a=Object(d.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)([]),j=Object(d.a)(i,2),b=j[0],h=j[1],g=Object(r.useState)([]),v=Object(d.a)(g,2),f=v[0],x=v[1],m=Object(r.useState)([]),y=Object(d.a)(m,2),w=y[0],k=y[1],L=Object(r.useState)(),C=Object(d.a)(L,2),A=C[0],N=C[1],R=Object(r.useState)(t.id),U=Object(d.a)(R,2),I=U[0],E=(U[1],Object(r.useState)([])),D=Object(d.a)(E,2),P=(D[0],D[1]),T=Object(r.useState)({gender:"",size:"",frame:"",color:"",type:"",price:"",photoUrl:""}),_=Object(d.a)(T,2),F=_[0],B=_[1],z=Object(O.g)();console.log("ProductDetails:  ",t),console.log("Product Id: ",I),Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var c,n,r,a,s,i,u,d,j,p,b,O,g,v,f,m,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside async..."),e.prev=1,console.log("Fetching inventory for product:",t.id),e.next=5,fetch("".concat(S,"/inventory/").concat(t.id),{method:"get",headers:{"Content-Type":"application/json"}});case 5:if(!(c=e.sent).ok){e.next=31;break}return console.log("Inside response.ok:  ",c.ok),e.next=10,c.json();case 10:if(n=e.sent,r=n.productInfo,a=[],s=[],i=[],u=[],d=[],r.length>0&&r[0].frame)for(console.log("We have a bicycle..."),N("Bicycle"),j=0;j<r.length;j++)p={value:r[j].size,label:r[j].size},b={value:r[j].color,label:r[j].color},O={value:r[j].frame,label:r[j].frame},g={value:r[j].gender,label:r[j].gender},M(p,a)||a.push(p),M(b,s)||s.push(b),M(O,u)||u.push(O),M(g,i)||i.push(g);else if(r.length>0&&r[0].gender)for(v=0;v<r.length;v++)f={value:r[v].gender,label:r[v].gender},m={value:r[v].size,label:r[v].size},M(f,i)||i.push(f),M(m,a)||a.push(m);for(y=0;y<r.length;y++)d.push(r[y]);console.log("tmpInventory:  ",d),console.log("tmpSizes: ",a),console.log("tmpGenders: ",i),console.log("tmpColors: ",s),console.log("tmpFrames: ",u),P(d),o(a),h(i),x(s),k(u),e.next=32;break;case 31:throw c.status;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(1),console.log("Order size fetch error: ",e.t0);case 37:case"end":return e.stop()}}),e,null,[[1,34]])})))()}),[]);var M=function(e,t){for(var c=0;c<t.length;c++)if(t[c].value===e.value)return!0;return!1},V=function(e){return function(t){console.log("handleChange: props: ",e),console.log("handleChange: changing: ",e,":",t.value),B(Object(p.a)(Object(p.a)({},F),{},Object(Y.a)({},e,t.value)))}};return I?(console.log("productId before render: ",I," and type: ",A),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),z.push({pathname:"/orderConfirmation",state:{size:F.size,color:F.color,frame:F.frame,type:F.type,gender:F.gender,price:t.price,photoUrl:t.photoURL,name:t.name}})},style:{color:"black"},children:[Object(n.jsx)("div",{style:{marginTop:"10px"},children:s.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Size:"}),Object(n.jsx)(W.a,{options:s,onChange:V("size"),isSearchable:!0})]}):null}),Object(n.jsx)("div",{style:{marginTop:"10px"},children:f.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Color:"}),Object(n.jsx)(W.a,{options:f,onChange:V("color"),isSearchable:!0})]}):null}),Object(n.jsx)("div",{style:{marginTop:"10px"},children:w.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Frame:"}),Object(n.jsx)(W.a,{options:w,onChange:V("frame")})]}):null}),Object(n.jsx)("div",{style:{marginTop:"10px"},children:b.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Gender:"}),Object(n.jsx)(W.a,{options:b,onChange:V("gender"),isSearchable:!0})]}):null}),Object(n.jsx)("input",{style:{display:"block",marginTop:"15px"},type:"submit",value:"Add To Cart"})]})):(console.log("No product id ... not rendering!"),null)},Z=function(e){var t=e.productDetail,c=e.productRating,a=(e.productPrice,Object(r.useState)([])),s=Object(d.a)(a,2),o=s[0],i=s[1];return Object(r.useEffect)((function(){for(var e=[],t=0;t<c;t++)e.push(Object(n.jsx)("i",{className:"fas fa-star"}));i(e)}),[c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{style:{color:"white"},children:t.name}),Object(n.jsx)("p",{children:o}),Object(n.jsx)("p",{children:t.description}),Object(n.jsxs)("p",{children:["Price:  $",t.price]})]})},ee=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:"Wish to leave a review?  Login or Signup for an account!"})})},te="products/selected/inventoryAvail",ce="products/selected/selectedProduct",ne="products/selected/selectedProductType",re="products/selected/selectedProductId",ae="products/selected/colorsAvail",se="products/selected/framesAvail",oe="products/selected/sizesAvail",ie="products/selected/gendersAvail",le="products/selected/name",ue="products/selected/price",de="products/selected/description",je="products/selected/photoURL",pe=function(e){return{type:ne,selectedProductType:e}},be=function(e){return{type:re,selectedProductId:e}},he=function(e){return{type:ae,colorsAvail:e}},Oe=function(e){return{type:oe,sizesAvail:e}},ge=function(e){return{type:se,framesAvail:e}},ve=function(e){return{type:ie,gendersAvail:e}},fe=function(e){return{type:le,productName:e}},xe=function(e){return{type:ue,productPrice:e}},me=function(e){return{type:de,productDescription:e}},ye=function(e){return{type:je,photoURL:e}},we=function(e){return{type:te,inventoryAvail:e}};var Se=function(e,t){for(var c=0;c<t.length;c++)if(t[c].value===e.value)return!0;return!1},ke=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,a,s,o,i,u,d,j,p,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/inventory/").concat(t),{method:"get",headers:{"Content-Type":"application/json"}});case 2:if(!(c=e.sent).ok){e.next=16;break}return e.next=6,c.json();case 6:for(n=e.sent,r=n.productInfo,a=[],s=[],o=[],i=[],u=0;u<r.length;u++)d={value:r[u].size,label:r[u].size},j={value:r[u].color,label:r[u].color},p={value:r[u].frame,label:r[u].frame},b={value:r[u].gender,label:r[u].gender},Se(d,a)||a.push(d),Se(j,s)||s.push(j),Se(p,i)||i.push(p),Se(b,o)||o.push(b);return e.abrupt("return",{type:n.type,productId:t,colorsAvail:s,sizesAvail:a,framesAvail:i,gendersAvail:o,productName:n.name,photoURL:n.photoURL,price:n.price,description:n.description,inventoryAvail:n.productInfo});case 16:return console.log("Error retrieving selected product info."),e.abrupt("return",c.status);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=function(e){var t=Object(r.useState)([]),c=Object(d.a)(t,2),a=c[0],s=c[1],o=e.location.state.props,i=Object(r.useState)(o.id),j=Object(d.a)(i,1)[0],p=Object(h.c)((function(e){return e.authentication.userId})),b=Object(r.useState)(),O=Object(d.a)(b,2)[1],g=Object(h.c)((function(e){return e.selectedProduct.price})),v=Object(r.useState)(),f=Object(d.a)(v,2)[1],x=Object(r.useState)(),m=Object(d.a)(x,2),y=m[0],w=m[1],k=Object(h.b)();return Object(r.useEffect)((function(){j?(O(o.name),xe(o.price),f(o.description),Object(u.a)(l.a.mark((function e(){var t,c,n,r,a,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/reviewsRatings/reviews/").concat(j));case 2:if(!(t=e.sent).ok){e.next=13;break}return e.next=6,t.json();case 6:for(c=e.sent,n={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=0;r<c.reviews.length;r++)a=c.reviews[r].postDate,o=new Date(a),i=o.toLocaleDateString(void 0,n),c.reviews[r].postDate=i;u=c.reviews,s(u),e.next=14;break;case 13:console.log("ProductDetail:  Errors fetching user reviews...");case 14:case"end":return e.stop()}}),e)})))(),Object(u.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/reviewsRatings/rating/").concat(j));case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:c=e.sent,console.log("Rating received: ",c.averageRating),w(c.averageRating),e.next=12;break;case 11:console.log("ProductDetail: Errors fetching avgRating");case 12:case"end":return e.stop()}}),e)})))(),Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(1);case 2:t=e.sent,k(pe(t.type)),k(be(j)),k(he(t.colorsAvail)),k(Oe(t.sizesAvail)),k(ge(t.framesAvail)),k(ve(t.gendersAvail)),k(fe(t.productName)),k(ye(t.photoURL)),k(xe(t.price)),k(f(t.setProductDescription)),k(we(t.inventoryAvail));case 14:case"end":return e.stop()}}),e)})))()):console.log("Product ID is not set ...")}),[j,o.description,o.name,o.price]),Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("div",{style:{borderColor:"2px solid red",display:"flex",height:"auto"},children:[Object(n.jsxs)("div",{className:"productDetail",style:{width:"60%"},children:[Object(n.jsx)("img",{src:o.photoURL,style:{height:"400px"},alt:"product detail"}),Object(n.jsx)("p",{children:"Product Reviews:  "}),a.map((function(t,c){return Object(n.jsx)(J,{productId:e.id,review:t},c)}))]}),Object(n.jsxs)("div",{className:"productOrder",style:{display:"inline-block",width:"30%"},children:[Object(n.jsx)(Z,{productDetail:o,productRating:y,productPrice:g}),Object(n.jsx)(Q,{productDetail:o})]})]}),p?Object(n.jsx)($,{productId:j}):Object(n.jsx)(ee,{})]})},Ce=c(16),Ae=function(e){console.log("received props:  ",e);var t,c=Object(h.c)((function(e){return e.bicycles.bicycleList})),a=Object(h.c)((function(e){return e.accessories.accessoryList})),s=Object(h.c)((function(e){return e.clothing.clothingList})),o=Object(r.useState)(void 0),i=Object(d.a)(o,2),j=i[0],p=i[1],b=Object(r.useState)(e.productSelected[0].id),g=Object(d.a)(b,2),v=g[0],f=(g[1],Object(h.b)()),x=void 0;switch(e.productSelected){case"Bicycles":x=c,t="Bicycles";break;case"Accessories":x=a,t="Accessories";break;case"Clothing":x=s,t="Clothing";break;default:x=void 0,t=void 0}Object(r.useEffect)((function(){if(v){console.log("Found productDetail:  ",j);var e=ke(1);f(pe(e.type)),f(be(v)),f(he(e.colorsAvail)),f(Oe(e.sizesAvail)),f(ge(e.framesAvail)),f(ve(e.gendersAvail)),f(fe(e.productName)),f(ye(e.photoURL)),f(xe(e.price)),f(me(e.setProductDescription)),f(we(e.inventoryAvail))}}),[v]);var m=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=parseInt(t.target.id),n=x.filter((function(e){if(parseInt(e.id)===c)return e})),console.log("Found productDetail:  ",j),e.next=6,ke(1);case 6:r=e.sent,f(pe(r.type)),f(be(v)),f(he(r.colorsAvail)),f(Oe(r.sizesAvail)),f(ge(r.framesAvail)),f(ve(r.gendersAvail)),f(fe(r.productName)),f(ye(r.photoURL)),f(xe(r.price)),f(me(r.setProductDescription)),f(we(r.inventoryAvail)),p(n[0]);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return void 0===x?void console.log("listItemArr is undefined..."):j?(console.log("Should be redicrecting to product detail now ..."),Object(n.jsx)(O.a,{to:{pathname:"/productDetail",state:{props:j}}})):(console.log("redrawing productGrid..."),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("div",{className:"productGrid",onClick:m,children:[x.map((function(e,c){var r=e.id,a=e.name,s=e.photoURL,o=e.price.toFixed(2);return Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:r-c,src:s,alt:t},r),Object(n.jsx)(Ce.a.Caption,{children:a}),Object(n.jsxs)("span",{className:"price",children:["$",o]})]},r)})),";"]})]}))},Ne=function(e){var t=Object(h.c)((function(e){return e.bicycles.bicycleList})),c=Object(h.c)((function(e){return e.accessories.accessoryList})),a=Object(h.c)((function(e){return e.clothing.clothingList})),s=Object(r.useState)(""),o=Object(d.a)(s,2),i=o[0],l=o[1],u=[],j="";switch(e.category){case"Bicycles":u=e.limit>0&&void 0!==t?t.slice(0,e.limit):t,j="bicycle";break;case"Accessories":u=e.limit>0&&void 0!==c?c.slice(0,e.limit):c,j="accessory";break;case"Clothing":u=e.limit>0&&void 0!==a?a.slice(0,e.limit):a,j="clothing";break;default:return}return void 0===u?null:i?(console.log("Calling ProductDetail with props:  ",i),Object(n.jsx)(O.a,{to:{pathname:"/productDetail",state:{props:i}}})):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"productGrid",onClick:function(e){var t=e.target.id.split("-")[1];l(u[t]),console.log("Clicked on e.target.id: ",e.target.id),console.log("Redirect to product detail page for product:  ",i)},children:[Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(j,"-0"),src:u[0].photoURL,alt:e.category}),Object(n.jsx)(Ce.a.Caption,{children:u[0].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(j,"-1"),src:u[1].photoURL,alt:e.category}),Object(n.jsx)(Ce.a.Caption,{children:u[1].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(j,"-2"),src:u[2].photoURL,alt:e.category}),Object(n.jsx)(Ce.a.Caption,{children:u[2].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(j,"-3"),src:u[3].photoURL,alt:e.category}),Object(n.jsx)(Ce.a.Caption,{children:u[3].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(j,"-4"),src:u[4].photoURL,alt:e.category}),Object(n.jsx)(Ce.a.Caption,{children:u[4].name})]})]})})})},Re="products/bicycles/bicycleList",Ue="products/bicycles/bicycleDetail",Ie="products/bicycles/bicyclesLoaded",Ee=function(e){return{type:Re,bicycleList:e}},De=function(e){return{type:Ie,bicyclesLoaded:e}};var Pe="products/Clothing/clothingList",Te="products/Clothing/clothingDetail",_e="products/Clothing/clothingLoaded",Fe=function(e){return{type:Pe,clothingList:e}},Be=function(e){return{type:_e,clothingLoaded:e}};var ze="products/accessory/accessoryList",Me="products/accessory/accessoryDetail",Ve="products/accessory/accessoryLoaded",Ge=function(e){return{type:ze,accessoryList:e}},He=function(e){return{type:Ve,accessoriesLoaded:e}};var Je=function(e){var t=Object(h.b)(),c=Object(r.useState)(!1),a=Object(d.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)(""),j=Object(d.a)(i,2),p=j[0],b=j[1],O=Object(r.useState)(""),g=Object(d.a)(O,2),v=g[0],f=g[1],x=Object(r.useState)(""),m=Object(d.a)(x,2),y=m[0],w=m[1],k=Object(r.useState)(""),L=Object(d.a)(k,2),C=L[0],A=L[1];Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/accessories/accessoriesList"),{method:"get",headers:{"Content-Type":"application/json"}});case 3:if(!(c=e.sent).ok){e.next=14;break}return e.next=7,c.json();case 7:n=e.sent,r=n.accessoriesList,t(Ge(r)),t(He(!0)),f(r[0].photoURL),e.next=15;break;case 14:throw c.status;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Accessory fetch error: ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/bicycles/bicyclesList"),{method:"get",headers:{"Content-Type":"application/json"}});case 3:if(!(c=e.sent).ok){e.next=14;break}return e.next=7,c.json();case 7:n=e.sent,r=n.bicyclesList,t(Ee(r)),t(De(!0)),b(r[0].photoURL),e.next=15;break;case 14:throw c.status;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Bicycle fetch error: ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/clothing/clothingList"),{method:"get",headers:{"Content-Type":"application/json"}});case 3:if(!(c=e.sent).ok){e.next=14;break}return e.next=7,c.json();case 7:n=e.sent,r=n.clothingList,t(Fe(r)),t(Be(!0)),w(r[0].photoURL),e.next=15;break;case 14:throw c.status;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("clothing fetch error:  ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),o(!0)}),[]);var N=function(e){console.log("Clicked on : ",e.target.id),A(e.target.id)};return s?C?(console.log("Products selected:  ",C),Object(n.jsx)(Ae,{productSelected:C})):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{}),Object(n.jsx)("div",{className:"productBanner",children:Object(n.jsxs)("div",{className:"photoSpread",children:[Object(n.jsxs)("div",{className:"productPhoto",onClick:N,children:[Object(n.jsx)("img",{id:"Bicycles",src:p,alt:"Bicycle"}),Object(n.jsx)(Ce.a.Caption,{children:"Bicycles"})]}),Object(n.jsxs)("div",{className:"productPhoto",onClick:N,children:[Object(n.jsx)("img",{id:"Clothing",src:y,alt:"Clothing"}),Object(n.jsx)(Ce.a.Caption,{children:"Clothing"})]}),Object(n.jsxs)("div",{className:"productPhoto",onClick:N,children:[Object(n.jsx)("img",{id:"Accessories",src:v,alt:"Accessory"}),Object(n.jsx)(Ce.a.Caption,{children:"Accessories"})]})]})}),Object(n.jsx)("h2",{style:{color:"white"},children:"Recommended in Bicycles"}),Object(n.jsx)(Ne,{category:"Bicycles",limit:5,children:" "}),Object(n.jsx)("h2",{style:{color:"white"},children:"Recommended in Clothing"}),Object(n.jsx)(Ne,{category:"Clothing",limit:5,children:" "}),Object(n.jsx)("h2",{style:{color:"white"},children:"Recommended in Accessories"}),Object(n.jsx)(Ne,{category:"Accessories",limit:5})]}):null},Ke=function(e){e.props;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{}),Object(n.jsx)("div",{className:"centerDiv",children:Object(n.jsxs)("form",{className:"loginOrSignUp",children:[Object(n.jsx)("h3",{children:"Already have an account? "}),Object(n.jsx)("button",{id:"login",onClick:function(e){e.preventDefault(),console.log("Handle login ..."),window.location.href="/users/login"},children:"Login"}),Object(n.jsx)("h3",{children:"Sign up?"}),Object(n.jsx)("button",{id:"signUp",onClick:function(e){e.preventDefault(),console.log("Handle signIn..."),window.location.href="/users/signup"},children:"SignUp"})]})})]})},We=function(){var e=Object(O.h)(),t=e.state.size,c=e.state.color,r=e.state.frame,a=e.state.type,s=e.state.gender,o=e.state.price,i=e.state.photoUrl,l=e.state.name;return console.log("Location:  ",e.state),console.log("Size: ",e.state.size,t),console.log("Color: ",e.state.color,c),console.log("Frame: ",e.state.frame,r),console.log("Type: ",e.state.type,a),console.log("Gender: ",e.state.gender,s),console.log("Price: ",e.state.price,o),console.log("photoUrl: ",e.state.photoUrl,i),console.log("name: ",e.state.name,l),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Congratulations!  Your order has been placed."}),Object(n.jsx)("h2",{children:l}),Object(n.jsx)("img",{src:i,style:{height:"20%"},alt:"product image"}),Object(n.jsx)("p",{children:o}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Order details:"}),Object(n.jsxs)("ul",{children:[t?Object(n.jsxs)("li",{children:["Size: ",t]}):null,c?Object(n.jsxs)("li",{children:["Color: ",c]}):null,r?Object(n.jsxs)("li",{children:["Frame: ",r," "]}):null,s?Object(n.jsxs)("li",{children:["Gender: ",s]}):null,a?Object(n.jsxs)("li",{children:["Type:  ",a]}):null,o?Object(n.jsxs)("li",{children:["Price: ",o]}):null]})]})]})},qe=function(e){var t=e.component,c=Object(b.a)(e,["component"]);return Object(n.jsx)(O.b,{render:function(e){return!0===c.needLogin?Object(n.jsx)(O.a,{to:"/users/login"}):Object(n.jsx)(t,Object(p.a)({},e))}})},Xe=function(){var e=Object(h.c)((function(e){return e.authentication.token})),t=Object(r.useState)(!1),c=Object(d.a)(t,2),a=c[0],s=c[1],o=Object(h.b)(),i=!e;return Object(r.useEffect)((function(){s(!0),o(function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=window.localStorage.getItem(k))&&t(_(c));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),a?Object(n.jsx)(g.a,{children:Object(n.jsxs)(O.d,{children:[Object(n.jsx)(O.b,{path:"/users/login",render:function(e){return Object(n.jsx)(G,Object(p.a)({},e))}}),Object(n.jsx)(O.b,{path:"/orderConfirmation",render:function(e){return Object(n.jsx)(We,{props:e})}}),Object(n.jsx)(O.b,{path:"/users/logInOrSignUp",render:function(e){return Object(n.jsx)(Ke,Object(p.a)({},e))}}),Object(n.jsx)(O.b,{path:"/users/signup",render:function(e){return Object(n.jsx)(V,Object(p.a)({},e))}}),Object(n.jsx)(O.b,{path:"/products",render:function(e){return Object(n.jsx)(Je,Object(p.a)({},e))}}),Object(n.jsx)(O.b,{path:"/productDetail",render:function(e){return Object(n.jsx)(Le,Object(p.a)({},e))}}),Object(n.jsx)(O.b,{path:"/productsPage",render:function(e){return Object(n.jsx)(Ae,Object(p.a)({},e))}}),Object(n.jsx)(qe,{path:"/order",exact:!0,needLogin:i,component:H}),Object(n.jsx)(O.b,{path:"/",render:function(e){return Object(n.jsx)(Je,Object(p.a)({},e))}})]})}):null},$e=function(e){var t=Object(r.useState)(""),c=Object(d.a)(t,2),a=c[0],s=c[1];Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=window.localStorage.getItem("token"))&&s(t);case 2:case"end":return e.stop()}}),e)})))()}),[s]);var o={token:a,setToken:s,needLogin:!a};return Object(n.jsx)(j.Provider,{value:o,children:Object(n.jsx)(Xe,{})})},Ye=c(28),Qe=c(48),Ze=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ye.d,et=Object(Ye.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(p.a)(Object(p.a)({},e),{},{token:t.token});case C:var c=Object(p.a)({},e);return delete c.token,c;case A:var n=Object(p.a)({},e);return n.avatarURL=t.avatarURL,n;case N:var r=Object(p.a)({},e);return delete r.avatarURL,r;case R:var a=Object(p.a)({},e);return a.name=t.name,a;case U:var s=Object(p.a)({},e);return delete s.name,s;case I:var o=Object(p.a)({},e);return o.emailAddress=t.emailAddress,o;case E:var i=Object(p.a)({},e);return delete i.emailAddress,i;case D:var l=Object(p.a)({},e);return l.userId=t.id,l;case P:var u=Object(p.a)({},e);return delete u.userId,u;default:return e}},clothing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Pe:var c=Object(p.a)({},e);return c.clothingList=t.clothingList,c;case Te:var n=Object(p.a)({},e);return n.clothingDetail=t.clothingDetail,n;case _e:var r=Object(p.a)({},e);return r.clothingLoaded=t.clothingLoaded,r;default:return e}},bicycles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{bicyclesLoaded:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:var c=Object(p.a)({},e);return c.bicycleList=t.bicycleList,c;case Ue:var n=Object(p.a)({},e);return n.bicycleDetail=t.bicycleId,n;case Ie:var r=Object(p.a)({},e);return r.bicyclesLoaded=t.bicyclesLoaded,r;default:return e}},accessories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ze:var c=Object(p.a)({},e);return c.accessoryList=t.accessoryList,c;case Me:var n=Object(p.a)({},e);return n.accessoryDetail=t.accessoryDetail,n;case Ve:var r=Object(p.a)({},e);return r.accessoriesLoaded=t.accessoriesLoaded,r;default:return e}},selectedProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:var c=Object(p.a)({},e);return c.selectedProduct=t.selectedProduct,c;case ne:var n=Object(p.a)({},e);return n.productType=t.selectedProductType,n;case re:var r=Object(p.a)({},e);return r.productId=t.selectedProductId,r;case ae:var a=Object(p.a)({},e);return a.colorsAvail=t.colorsAvail,a;case se:var s=Object(p.a)({},e);return s.framesAvail=t.framesAvail,s;case oe:var o=Object(p.a)({},e);return o.sizesAvail=t.sizesAvail,o;case ie:var i=Object(p.a)({},e);return i.gendersAvail=t.gendersAvail,i;case le:var l=Object(p.a)({},e);return l.name=t.productName,l;case ue:var u=Object(p.a)({},e);return u.price=t.productPrice,u;case de:var d=Object(p.a)({},e);return d.description=t.productDescription,d;case je:var j=Object(p.a)({},e);return j.photoURL=t.photoURL,j;case te:var b=Object(p.a)({},e);return b.inventoryAvail=t.inventoryAvail,b;default:return e}}}),tt=function(e){return Object(Ye.e)(et,e,Ze(Object(Ye.a)(Qe.a)))}();o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(h.a,{store:tt,children:Object(n.jsx)($e,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.53fd637c.chunk.js.map