(this["webpackJsonpcfr-frontend"]=this["webpackJsonpcfr-frontend"]||[]).push([[0],{55:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(0),a=c.n(r),s=c(24),o=c.n(s),i=(c(55),c(4)),l=c.n(i),u=c(10),j=c(3),d=Object(r.createContext)(),b=c(5),p=c(7),h=c(8),O=c(11),g=c(21),x=c(47),f=c.n(x),m=c(88),v=c(46),y=c.n(v),w=c(87),S=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL||"http://localhost:8080",k="user/authentication/token",C="user/authentication/SET_TOKEN",L="user/authentication/REMOVE_TOKEN",N="user/authentication/SET_AVATAR",R="user/authentication/REMOVE_AVATAR",E="user/authentication/SET_USER_NAME",I="user/authentication/REMOVE_USER_NAME",U="user/authentication/SET_USER_EMAIL",D="user/authentication/REMOVE_USER_EMAIL",T="user/authentication/SET_USER_ID",_="user/authentication/REMOVE_USER_ID",A=function(e){return{type:L}},P=function(e){return{type:C,token:e}},B=function(e){return{type:N,avatarURL:e}},F=function(e){return{type:E,name:e}},z=function(e){return{type:T,id:e}};var M=function(e){var t=Object(h.b)(),c="",a=Object(h.c)((function(e){return e.authentication.avatarURL})),s=Object(h.c)((function(e){return e.authentication.token})),o=Object(h.c)((function(e){return e.authentication.userId})),i=Object(h.c)((function(e){return e.authentication.name})),d=Object(r.useState)(null),b=Object(j.a)(d,2),p=b[0],O=b[1];Object(r.useEffect)((function(){o?g():O(null),console.log("Getting badge count.")}),[o]);var g=function(){var e=Object(u.a)(l.a.mark((function e(){var t,c,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=24;break}return console.log("UserId:  ",o),e.next=4,fetch("".concat(S,"/carts/cartItems/").concat(o),{method:"get",headers:{"Content-Type":"application/json"}});case 4:if(!(t=e.sent).ok){e.next=21;break}return e.next=8,t.json();case 8:if(c=e.sent,n=c.cartItems,console.log("Got cartItems:  ",n.cartItems),!(n>0)){e.next=17;break}return console.log("Badge count:  ",n),O(n),e.abrupt("return",n);case 17:return O(null),e.abrupt("return",null);case 19:e.next=22;break;case 21:console.log("Failed to get badgeCount.");case 22:e.next=25;break;case 24:return e.abrupt("return",null);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(w.a,{style:{display:"flex",justifyContent:"space-around"},children:Object(n.jsxs)("div",{className:"topBar",children:[Object(n.jsx)("label",{className:"logoFont",style:{color:"white"},children:"CF Riders"}),Object(n.jsx)("form",{onSubmit:function(e){e.preventDefault(),console.log("Submit handled:  ",c)},children:Object(n.jsx)("input",{className:"navSearchBar",type:"text",name:"search",onChange:function(e){c=e.target.value,console.log("Search string:  ",c)},placeholder:"Start shopping..."})}),Object(n.jsx)(y.a,{className:"homeIcon",onClick:function(e){e.preventDefault(),console.log("Clicked home button..."),window.location.href="/"},style:{margin:"10px",color:"white"}}),Object(n.jsx)(m.a,{badgeContent:p,color:"secondary",children:Object(n.jsx)(f.a,{style:{color:"white"}})}),Object(n.jsx)("button",{className:"signInButton",onClick:function(e){s?(t(A()),t({type:R}),t({type:I}),t({type:D}),t({type:_}),window.localStorage.removeItem(k)):(e.preventDefault(),console.log("Need to redirect to signin page..."),window.location.href="/users/logInOrSignUp")},children:s?"SignOut":"SignIn"}),Object(n.jsxs)("div",{className:"avatar-container",children:[a?Object(n.jsx)("img",{src:a,className:"main-profile-img avatar",alt:"avatar"}):Object(n.jsx)("img",{src:"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png",className:"main-profile-img avatar",alt:"avatar"}),Object(n.jsx)("i",{className:"fa"}),i]})]})})},V=function(e){var t=Object(r.useState)(""),c=Object(j.a)(t,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(j.a)(o,2),d=i[0],b=i[1],p=Object(r.useState)(""),g=Object(j.a)(p,2),x=g[0],f=g[1],m=Object(r.useState)(""),v=Object(j.a)(m,2),y=v[0],w=v[1],C=Object(r.useState)(""),L=Object(j.a)(C,2),N=L[0],R=L[1],E=Object(r.useState)(""),I=Object(j.a)(E,2),U=I[0],D=I[1],T=Object(h.b)(),_=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(S,"/users/"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N,emailAddress:d,password:x,confirmPassword:y,avatarURL:U})});case 3:if(c=e.sent,console.log("Sent signup request with user: ",d," and password: ",x),!c.ok){e.next=17;break}return e.next=8,c.json();case 8:n=e.sent,r=n.token,a=n.user,window.localStorage.setItem(k,r),T(P(r)),console.log("User name:  ",a.name),T(F(a.name.split(" ")[0])),T(B(""===U?"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_960_720.png":U)),s(r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?Object(n.jsx)(O.a,{to:"/"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("form",{className:"signUpForm",onSubmit:_,children:[Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Name "})}),Object(n.jsx)("input",{className:"inputBox",type:"text",placeholder:"First and Last Name",value:N,onChange:function(e){R(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Email:"})}),Object(n.jsx)("input",{className:"inputBox",type:"email",placeholder:"Email address",value:d,onChange:function(e){b(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Avatar URL"})}),Object(n.jsx)("input",{className:"inputBox",type:"text",placeholder:"Avatar URL (optional)",value:U,onChange:function(e){D(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Password:"})}),Object(n.jsx)("input",{className:"inputBox",type:"password",placeholder:"Password",value:x,onChange:function(e){f(e.target.value)}})]}),Object(n.jsxs)("div",{className:"signUpInput",children:[Object(n.jsx)("div",{className:"signUpLabel",children:Object(n.jsx)("label",{children:"Confirm Password:"})}),Object(n.jsx)("input",{className:"inputBox",type:"password",placeholder:"Confirm Password",value:y,onChange:function(e){w(e.target.value)}})]}),Object(n.jsx)("button",{type:"submit",children:"Sign Up"})]})]})},G=function(e){var t=Object(r.useState)(""),c=Object(j.a)(t,2),a=c[0],s=c[1],o=Object(r.useState)(""),i=Object(j.a)(o,2),d=i[0],b=i[1],p=Object(r.useState)(""),g=Object(j.a)(p,2),x=g[0],f=g[1],m=Object(h.b)(),v=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s("demouser@demouser.com"),b("password"),t.preventDefault(),e.next=5,fetch("".concat(S,"/users/login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailAddress:"demouser@demouser.com",password:"password"})});case 5:if(c=e.sent,console.log("Sent login request with user:  demouser@demouser.com, and password:  password"),console.log("response is:  ",c),!c.ok){e.next=20;break}return e.next=11,c.json();case 11:n=e.sent,r=n.token,a=n.user,window.localStorage.setItem(k,r),m(P(r)),m(F(a.name.split(" ")[0])),m(B(a.avatarURL)),m(z(a.id)),f(r);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var c,n,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(S,"/users/login"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({emailAddress:a,password:d})});case 3:if(c=e.sent,console.log("Sent login request with user: ",a," and password: ",d),console.log("response is:  ",c),!c.ok){e.next=18;break}return e.next=9,c.json();case 9:n=e.sent,r=n.token,s=n.user,window.localStorage.setItem(k,r),m(P(r)),m(F(s.name.split(" ")[0])),m(B(s.avatarURL)),m(z(s.id)),f(r);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x?Object(n.jsx)(O.a,{to:"/"}):Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("form",{className:"loginForm",children:[Object(n.jsxs)("div",{className:"loginInput",children:[Object(n.jsx)("div",{children:Object(n.jsx)("label",{children:"Email :           "})}),Object(n.jsx)("input",{className:"inputBox",type:"email",placeholder:"Email",value:a,onChange:function(e){s(e.target.value)}})]}),Object(n.jsxs)("div",{className:"loginInput",children:[Object(n.jsx)("div",{children:Object(n.jsx)("label",{children:"Password : "})}),Object(n.jsx)("input",{className:"inputBox",type:"password",placeholder:"Password",value:d,onChange:function(e){b(e.target.value)}})]}),Object(n.jsx)("button",{onClick:y,children:"Login"}),Object(n.jsx)("button",{style:{height:"60px"},onClick:v,children:"Login Demo"})]})]})},H=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsx)("h1",{children:"OrderDetail ... should be a protected route"})]})},J=function(e){e.productId;var t=e.review,c=Object(r.useState)([]),a=Object(j.a)(c,2),s=a[0],o=a[1];return Object(r.useEffect)((function(){for(var e=[],c=0;c<t.rating;c++)e.push(Object(n.jsx)("i",{className:"fas fa-star"}));o(e)}),[t.rating]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("img",{src:t.avatarURL,alt:"Avatar",style:{height:"60px",width:"60px",borderRadius:"40px",backgroundColor:"none"}}),Object(n.jsxs)("p",{style:{display:"inline-block"},children:[t.name,",    ",t.postDate]}),Object(n.jsx)("p",{children:s})]}),Object(n.jsx)("div",{style:{borderBottom:"2px solid grey"},children:Object(n.jsx)("p",{children:t.review})})]})},K=function(e){return Object(n.jsxs)("div",{style:{border:"2px solid red",display:"inline-block",width:"30%"},children:[Object(n.jsx)("h2",{children:"Rate this product:"}),Object(n.jsx)("h2",{children:"star  star  star  star  star"})]})},W=c(29),q=[{value:"chocolate",label:"Chocolate"},{value:"strawberry",label:"Strawberry"},{value:"vanilla",label:"Vanilla"}],X=function(){return Object(n.jsx)(W.a,{options:q})},$=function(e){var t=e.productId,c=Object(O.g)(),a=Object(r.useState)(t),s=Object(j.a)(a,1)[0],o=Object(r.useState)(""),i=Object(j.a)(o,2),l=i[0],u=i[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X,{}),Object(n.jsx)("div",{style:{borderTop:"2px solid grey",display:"inline-block",width:"60%"},children:Object(n.jsxs)("div",{style:{display:"block"},children:[Object(n.jsx)("h2",{children:"Add your review: "}),Object(n.jsxs)("form",{children:[Object(n.jsx)("textarea",{style:{width:"80%"},value:l,placeholder:"Tell us what you like about this product ...",id:"review",name:"review",rows:"10",onChange:function(e){u(e.target.value)}}),Object(n.jsx)("button",{style:{marginLeft:"20px"},id:"Submit",onClick:function(e){e.preventDefault(),console.log("Handle updateProductReview ..."),console.log("The next state may be problematic. Not sure about the next line passing state..."),console.log("Entered:  ",l),c.push({pathname:"/productDetail",state:{props:s}})},children:"Submit"})]})]})}),Object(n.jsx)(K,{})]})},Y=c(6),Q=function(e){var t=e.productDetail,c=Object(r.useState)([]),a=Object(j.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)([]),d=Object(j.a)(i,2),p=d[0],h=d[1],g=Object(r.useState)([]),x=Object(j.a)(g,2),f=x[0],m=x[1],v=Object(r.useState)([]),y=Object(j.a)(v,2),w=y[0],k=y[1],C=Object(r.useState)(),L=Object(j.a)(C,2),N=L[0],R=L[1],E=Object(r.useState)(t.id),I=Object(j.a)(E,2),U=I[0],D=(I[1],Object(r.useState)([])),T=Object(j.a)(D,2),_=(T[0],T[1]),A=Object(r.useState)({gender:"",size:"",frame:"",color:"",type:"",price:"",photoUrl:""}),P=Object(j.a)(A,2),B=P[0],F=P[1],z=Object(O.g)();console.log("ProductDetails:  ",t),console.log("Product Id: ",U),Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var c,n,r,a,s,i,u,j,d,b,p,O,g,x,f,v,y;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Inside async..."),e.prev=1,console.log("Fetching inventory for product:",t.id),e.next=5,fetch("".concat(S,"/inventory/").concat(t.id),{method:"get",headers:{"Content-Type":"application/json"}});case 5:if(!(c=e.sent).ok){e.next=31;break}return console.log("Inside response.ok:  ",c.ok),e.next=10,c.json();case 10:if(n=e.sent,r=n.productInfo,a=[],s=[],i=[],u=[],j=[],r.length>0&&r[0].frame)for(console.log("We have a bicycle..."),R("Bicycle"),d=0;d<r.length;d++)b={value:r[d].size,label:r[d].size},p={value:r[d].color,label:r[d].color},O={value:r[d].frame,label:r[d].frame},g={value:r[d].gender,label:r[d].gender},M(b,a)||a.push(b),M(p,s)||s.push(p),M(O,u)||u.push(O),M(g,i)||i.push(g);else if(r.length>0&&r[0].gender)for(x=0;x<r.length;x++)f={value:r[x].gender,label:r[x].gender},v={value:r[x].size,label:r[x].size},M(f,i)||i.push(f),M(v,a)||a.push(v);for(y=0;y<r.length;y++)j.push(r[y]);console.log("tmpInventory:  ",j),console.log("tmpSizes: ",a),console.log("tmpGenders: ",i),console.log("tmpColors: ",s),console.log("tmpFrames: ",u),_(j),o(a),h(i),m(s),k(u),e.next=32;break;case 31:throw c.status;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(1),console.log("Order size fetch error: ",e.t0);case 37:case"end":return e.stop()}}),e,null,[[1,34]])})))()}),[]);var M=function(e,t){for(var c=0;c<t.length;c++)if(t[c].value===e.value)return!0;return!1},V=function(e){return function(t){console.log("handleChange: props: ",e),console.log("handleChange: changing: ",e,":",t.value),F(Object(b.a)(Object(b.a)({},B),{},Object(Y.a)({},e,t.value)))}};return U?(console.log("productId before render: ",U," and type: ",N),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),z.push({pathname:"/orderConfirmation",state:{size:B.size,color:B.color,frame:B.frame,type:B.type,gender:B.gender,price:t.price,photoUrl:t.photoURL,name:t.name}})},style:{color:"black"},children:[Object(n.jsx)("div",{style:{marginTop:"10px"},children:s.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Size:"}),Object(n.jsx)(W.a,{options:s,onChange:V("size"),isSearchable:!0})]}):null}),Object(n.jsx)("div",{style:{marginTop:"10px"},children:f.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Color:"}),Object(n.jsx)(W.a,{options:f,onChange:V("color"),isSearchable:!0})]}):null}),Object(n.jsx)("div",{style:{marginTop:"10px"},children:w.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Frame:"}),Object(n.jsx)(W.a,{options:w,onChange:V("frame")})]}):null}),Object(n.jsx)("div",{style:{marginTop:"10px"},children:p.length>0?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("label",{style:{marginRight:"10px"},children:"Gender:"}),Object(n.jsx)(W.a,{options:p,onChange:V("gender"),isSearchable:!0})]}):null}),Object(n.jsx)("input",{style:{display:"block",marginTop:"15px"},type:"submit",value:"Add To Cart"})]})):(console.log("No product id ... not rendering!"),null)},Z=function(e){var t=e.productDetail,c=e.productRating,a=(e.productPrice,Object(r.useState)([])),s=Object(j.a)(a,2),o=s[0],i=s[1];return Object(r.useEffect)((function(){for(var e=[],t=0;t<c;t++)e.push(Object(n.jsx)("i",{className:"fas fa-star"}));i(e)}),[c]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{style:{color:"white"},children:t.name}),Object(n.jsx)("p",{children:o}),Object(n.jsx)("p",{children:t.description}),Object(n.jsxs)("p",{children:["Price:  $",t.price]})]})},ee=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("h3",{children:"Wish to leave a review?  Login or Signup for an account!"})})},te=function(e){var t=Object(r.useState)([]),c=Object(j.a)(t,2),a=c[0],s=c[1],o=e.location.state.props,i=Object(r.useState)(o.id),d=Object(j.a)(i,1)[0],b=Object(h.c)((function(e){return e.authentication.userId})),p=Object(r.useState)(),O=Object(j.a)(p,2)[1],g=Object(r.useState)(),x=Object(j.a)(g,2),f=x[0],m=x[1],v=Object(r.useState)(),y=Object(j.a)(v,2)[1],w=Object(r.useState)(),k=Object(j.a)(w,2),C=k[0],L=k[1];return Object(r.useEffect)((function(){d?(O(o.name),m(o.price),y(o.description),Object(u.a)(l.a.mark((function e(){var t,c,n,r,a,o,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/reviewsRatings/reviews/").concat(d));case 2:if(!(t=e.sent).ok){e.next=13;break}return e.next=6,t.json();case 6:for(c=e.sent,n={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=0;r<c.reviews.length;r++)a=c.reviews[r].postDate,o=new Date(a),i=o.toLocaleDateString(void 0,n),c.reviews[r].postDate=i;u=c.reviews,s(u),e.next=14;break;case 13:console.log("ProductDetail:  Errors fetching user reviews...");case 14:case"end":return e.stop()}}),e)})))(),Object(u.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(S,"/reviewsRatings/rating/").concat(d));case 2:if(!(t=e.sent).ok){e.next=11;break}return e.next=6,t.json();case 6:c=e.sent,console.log("Rating received: ",c.averageRating),L(c.averageRating),e.next=12;break;case 11:console.log("ProductDetail: Errors fetching avgRating");case 12:case"end":return e.stop()}}),e)})))()):console.log("Product ID is not set ...")}),[d,o.description,o.name,o.price]),Object(n.jsxs)("div",{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("div",{style:{borderColor:"2px solid red",display:"flex",height:"auto"},children:[Object(n.jsxs)("div",{className:"productDetail",style:{width:"60%"},children:[Object(n.jsx)("img",{src:o.photoURL,style:{height:"400px"},alt:"product detail"}),Object(n.jsx)("p",{children:"Product Reviews:  "}),a.map((function(t,c){return Object(n.jsx)(J,{productId:e.id,review:t},c)}))]}),Object(n.jsxs)("div",{className:"productOrder",style:{display:"inline-block",width:"30%"},children:[Object(n.jsx)(Z,{productDetail:o,productRating:C,productPrice:f}),Object(n.jsx)(Q,{productDetail:o})]})]}),b?Object(n.jsx)($,{productId:d}):Object(n.jsx)(ee,{})]})},ce=c(16),ne=function(e){console.log("received props:  ",e);var t,c=Object(h.c)((function(e){return e.bicycles.bicycleList})),a=Object(h.c)((function(e){return e.accessories.accessoryList})),s=Object(h.c)((function(e){return e.clothing.clothingList})),o=Object(r.useState)(void 0),i=Object(j.a)(o,2),l=i[0],u=i[1],d=void 0;switch(e.productSelected){case"Bicycles":d=c,t="Bicycles";break;case"Accessories":d=a,t="Accessories";break;case"Clothing":d=s,t="Clothing";break;default:d=void 0,t=void 0}return void 0===d?void console.log("listItemArr is undefined..."):l?(console.log("Should be redicrecting to product detail now ..."),Object(n.jsx)(O.a,{to:{pathname:"/productDetail",state:{props:l}}})):(console.log("redrawing productGrid..."),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{}),Object(n.jsxs)("div",{className:"productGrid",onClick:function(e){e.preventDefault();var t=parseInt(e.target.id),c=d.filter((function(e){if(parseInt(e.id)===t)return e}));u(c[0]),console.log("Found productDetail:  ",l)},children:[d.map((function(e,c){var r=e.id,a=e.name,s=e.photoURL,o=e.price.toFixed(2);return Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:r-c,src:s,alt:t},r),Object(n.jsx)(ce.a.Caption,{children:a}),Object(n.jsxs)("span",{className:"price",children:["$",o]})]},r)})),";"]})]}))},re=function(e){var t=Object(h.c)((function(e){return e.bicycles.bicycleList})),c=Object(h.c)((function(e){return e.accessories.accessoryList})),a=Object(h.c)((function(e){return e.clothing.clothingList})),s=Object(r.useState)(""),o=Object(j.a)(s,2),i=o[0],l=o[1],u=[],d="";switch(e.category){case"Bicycles":u=e.limit>0&&void 0!==t?t.slice(0,e.limit):t,d="bicycle";break;case"Accessories":u=e.limit>0&&void 0!==c?c.slice(0,e.limit):c,d="accessory";break;case"Clothing":u=e.limit>0&&void 0!==a?a.slice(0,e.limit):a,d="clothing";break;default:return}return void 0===u?null:i?(console.log("Calling ProductDetail with props:  ",i),Object(n.jsx)(O.a,{to:{pathname:"/productDetail",state:{props:i}}})):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"productGrid",onClick:function(e){var t=e.target.id.split("-")[1];l(u[t]),console.log("Clicked on e.target.id: ",e.target.id),console.log("Redirect to product detail page for product:  ",i)},children:[Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(d,"-0"),src:u[0].photoURL,alt:e.category}),Object(n.jsx)(ce.a.Caption,{children:u[0].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(d,"-1"),src:u[1].photoURL,alt:e.category}),Object(n.jsx)(ce.a.Caption,{children:u[1].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(d,"-2"),src:u[2].photoURL,alt:e.category}),Object(n.jsx)(ce.a.Caption,{children:u[2].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(d,"-3"),src:u[3].photoURL,alt:e.category}),Object(n.jsx)(ce.a.Caption,{children:u[3].name})]}),Object(n.jsxs)("div",{className:"productItem",children:[Object(n.jsx)("img",{id:"".concat(d,"-4"),src:u[4].photoURL,alt:e.category}),Object(n.jsx)(ce.a.Caption,{children:u[4].name})]})]})})})},ae="products/bicycles/bicycleList",se="products/bicycles/bicycleDetail",oe="products/bicycles/bicyclesLoaded",ie=function(e){return{type:ae,bicycleList:e}},le=function(e){return{type:oe,bicyclesLoaded:e}};var ue="products/Clothing/clothingList",je="products/Clothing/clothingDetail",de="products/Clothing/clothingLoaded",be=function(e){return{type:ue,clothingList:e}},pe=function(e){return{type:de,clothingLoaded:e}};var he="products/accessory/accessoryList",Oe="products/accessory/accessoryDetail",ge="products/accessory/accessoryLoaded",xe=function(e){return{type:he,accessoryList:e}},fe=function(e){return{type:ge,accessoriesLoaded:e}};var me=function(e){var t=Object(h.b)(),c=Object(r.useState)(!1),a=Object(j.a)(c,2),s=a[0],o=a[1],i=Object(r.useState)(""),d=Object(j.a)(i,2),b=d[0],p=d[1],O=Object(r.useState)(""),g=Object(j.a)(O,2),x=g[0],f=g[1],m=Object(r.useState)(""),v=Object(j.a)(m,2),y=v[0],w=v[1],k=Object(r.useState)(""),C=Object(j.a)(k,2),L=C[0],N=C[1];Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/accessories/accessoriesList"),{method:"get",headers:{"Content-Type":"application/json"}});case 3:if(!(c=e.sent).ok){e.next=14;break}return e.next=7,c.json();case 7:n=e.sent,r=n.accessoriesList,t(xe(r)),t(fe(!0)),f(r[0].photoURL),e.next=15;break;case 14:throw c.status;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Accessory fetch error: ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/bicycles/bicyclesList"),{method:"get",headers:{"Content-Type":"application/json"}});case 3:if(!(c=e.sent).ok){e.next=14;break}return e.next=7,c.json();case 7:n=e.sent,r=n.bicyclesList,t(ie(r)),t(le(!0)),p(r[0].photoURL),e.next=15;break;case 14:throw c.status;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("Bicycle fetch error: ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var c,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/clothing/clothingList"),{method:"get",headers:{"Content-Type":"application/json"}});case 3:if(!(c=e.sent).ok){e.next=14;break}return e.next=7,c.json();case 7:n=e.sent,r=n.clothingList,t(be(r)),t(pe(!0)),w(r[0].photoURL),e.next=15;break;case 14:throw c.status;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log("clothing fetch error:  ",e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),o(!0)}),[]);var R=function(e){console.log("Clicked on : ",e.target.id),N(e.target.id)};return s?L?(console.log("Products selected:  ",L),Object(n.jsx)(ne,{productSelected:L})):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{}),Object(n.jsx)("div",{className:"productBanner",children:Object(n.jsxs)("div",{className:"photoSpread",children:[Object(n.jsxs)("div",{className:"productPhoto",onClick:R,children:[Object(n.jsx)("img",{id:"Bicycles",src:b,alt:"Bicycle"}),Object(n.jsx)(ce.a.Caption,{children:"Bicycles"})]}),Object(n.jsxs)("div",{className:"productPhoto",onClick:R,children:[Object(n.jsx)("img",{id:"Clothing",src:y,alt:"Clothing"}),Object(n.jsx)(ce.a.Caption,{children:"Clothing"})]}),Object(n.jsxs)("div",{className:"productPhoto",onClick:R,children:[Object(n.jsx)("img",{id:"Accessories",src:x,alt:"Accessory"}),Object(n.jsx)(ce.a.Caption,{children:"Accessories"})]})]})}),Object(n.jsx)("h2",{style:{color:"white"},children:"Recommended in Bicycles"}),Object(n.jsx)(re,{category:"Bicycles",limit:5,children:" "}),Object(n.jsx)("h2",{style:{color:"white"},children:"Recommended in Clothing"}),Object(n.jsx)(re,{category:"Clothing",limit:5,children:" "}),Object(n.jsx)("h2",{style:{color:"white"},children:"Recommended in Accessories"}),Object(n.jsx)(re,{category:"Accessories",limit:5})]}):null},ve=function(e){e.props;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M,{}),Object(n.jsx)("div",{className:"centerDiv",children:Object(n.jsxs)("form",{className:"loginOrSignUp",children:[Object(n.jsx)("h3",{children:"Already have an account? "}),Object(n.jsx)("button",{id:"login",onClick:function(e){e.preventDefault(),console.log("Handle login ..."),window.location.href="/users/login"},children:"Login"}),Object(n.jsx)("h3",{children:"Sign up?"}),Object(n.jsx)("button",{id:"signUp",onClick:function(e){e.preventDefault(),console.log("Handle signIn..."),window.location.href="/users/signup"},children:"SignUp"})]})})]})},ye=function(){var e=Object(O.h)(),t=e.state.size,c=e.state.color,r=e.state.frame,a=e.state.type,s=e.state.gender,o=e.state.price,i=e.state.photoUrl,l=e.state.name;return console.log("Location:  ",e.state),console.log("Size: ",e.state.size,t),console.log("Color: ",e.state.color,c),console.log("Frame: ",e.state.frame,r),console.log("Type: ",e.state.type,a),console.log("Gender: ",e.state.gender,s),console.log("Price: ",e.state.price,o),console.log("photoUrl: ",e.state.photoUrl,i),console.log("name: ",e.state.name,l),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Congratulations!  Your order has been placed."}),Object(n.jsx)("h2",{children:l}),Object(n.jsx)("img",{src:i,style:{height:"20%"},alt:"product image"}),Object(n.jsx)("p",{children:o}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Order details:"}),Object(n.jsxs)("ul",{children:[t?Object(n.jsxs)("li",{children:["Size: ",t]}):null,c?Object(n.jsxs)("li",{children:["Color: ",c]}):null,r?Object(n.jsxs)("li",{children:["Frame: ",r," "]}):null,s?Object(n.jsxs)("li",{children:["Gender: ",s]}):null,a?Object(n.jsxs)("li",{children:["Type:  ",a]}):null,o?Object(n.jsxs)("li",{children:["Price: ",o]}):null]})]})]})},we=function(e){var t=e.component,c=Object(p.a)(e,["component"]);return Object(n.jsx)(O.b,{render:function(e){return!0===c.needLogin?Object(n.jsx)(O.a,{to:"/users/login"}):Object(n.jsx)(t,Object(b.a)({},e))}})},Se=function(){var e=Object(h.c)((function(e){return e.authentication.token})),t=Object(r.useState)(!1),c=Object(j.a)(t,2),a=c[0],s=c[1],o=Object(h.b)(),i=!e;return Object(r.useEffect)((function(){s(!0),o(function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(c=window.localStorage.getItem(k))&&t(P(c));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),a?Object(n.jsx)(g.a,{children:Object(n.jsxs)(O.d,{children:[Object(n.jsx)(O.b,{path:"/users/login",render:function(e){return Object(n.jsx)(G,Object(b.a)({},e))}}),Object(n.jsx)(O.b,{path:"/orderConfirmation",render:function(e){return Object(n.jsx)(ye,{props:e})}}),Object(n.jsx)(O.b,{path:"/users/logInOrSignUp",render:function(e){return Object(n.jsx)(ve,Object(b.a)({},e))}}),Object(n.jsx)(O.b,{path:"/users/signup",render:function(e){return Object(n.jsx)(V,Object(b.a)({},e))}}),Object(n.jsx)(O.b,{path:"/products",render:function(e){return Object(n.jsx)(me,Object(b.a)({},e))}}),Object(n.jsx)(O.b,{path:"/productDetail",render:function(e){return Object(n.jsx)(te,Object(b.a)({},e))}}),Object(n.jsx)(O.b,{path:"/productsPage",render:function(e){return Object(n.jsx)(ne,Object(b.a)({},e))}}),Object(n.jsx)(we,{path:"/order",exact:!0,needLogin:i,component:H}),Object(n.jsx)(O.b,{path:"/",render:function(e){return Object(n.jsx)(me,Object(b.a)({},e))}})]})}):null},ke=function(e){var t=Object(r.useState)(""),c=Object(j.a)(t,2),a=c[0],s=c[1];Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=window.localStorage.getItem("token"))&&s(t);case 2:case"end":return e.stop()}}),e)})))()}),[s]);var o={token:a,setToken:s,needLogin:!a};return Object(n.jsx)(d.Provider,{value:o,children:Object(n.jsx)(Se,{})})},Ce=c(28),Le=c(48),Ne=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ce.d,Re=Object(Ce.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(b.a)(Object(b.a)({},e),{},{token:t.token});case L:var c=Object(b.a)({},e);return delete c.token,c;case N:var n=Object(b.a)({},e);return n.avatarURL=t.avatarURL,n;case R:var r=Object(b.a)({},e);return delete r.avatarURL,r;case E:var a=Object(b.a)({},e);return a.name=t.name,a;case I:var s=Object(b.a)({},e);return delete s.name,s;case U:var o=Object(b.a)({},e);return o.emailAddress=t.emailAddress,o;case D:var i=Object(b.a)({},e);return delete i.emailAddress,i;case T:var l=Object(b.a)({},e);return l.userId=t.id,l;case _:var u=Object(b.a)({},e);return delete u.userId,u;default:return e}},clothing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ue:var c=Object(b.a)({},e);return c.clothingList=t.clothingList,c;case je:var n=Object(b.a)({},e);return n.clothingDetail=t.clothingDetail,n;case de:var r=Object(b.a)({},e);return r.clothingLoaded=t.clothingLoaded,r;default:return e}},bicycles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{bicyclesLoaded:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:var c=Object(b.a)({},e);return c.bicycleList=t.bicycleList,c;case se:var n=Object(b.a)({},e);return n.bicycleDetail=t.bicycleId,n;case oe:var r=Object(b.a)({},e);return r.bicyclesLoaded=t.bicyclesLoaded,r;default:return e}},accessories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:var c=Object(b.a)({},e);return c.accessoryList=t.accessoryList,c;case Oe:var n=Object(b.a)({},e);return n.accessoryDetail=t.accessoryDetail,n;case ge:var r=Object(b.a)({},e);return r.accessoriesLoaded=t.accessoriesLoaded,r;default:return e}}}),Ee=function(e){return Object(Ce.e)(Re,e,Ne(Object(Ce.a)(Le.a)))}();o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(h.a,{store:Ee,children:Object(n.jsx)(ke,{})})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.66af9c6f.chunk.js.map